# 相机标定

![](/home/maple/笔记/images/2025-10-02-21-51-57-摄相机几何.png)

![](/home/maple/笔记/images/2025-10-02-22-35-19-非线性方程组的最小二乘解.png)

![](/home/maple/笔记/images/2025-10-02-22-39-47-标定问题.png)

通过已知世界坐标和像素坐标进行解方程

![](/home/maple/笔记/images/2025-10-02-22-46-00-标定方程的建立.png)

![](/home/maple/笔记/images/2025-10-02-22-48-47-求解投影矩阵.png)

![](/home/maple/笔记/images/2025-10-02-23-01-20-标定问题2.png)

![](/home/maple/笔记/images/2025-10-02-23-06-09-奇异值分解求解.png)

求出相机的投影矩阵

![](/home/maple/笔记/images/2025-10-09-20-30-12-提取摄像机参数.png)

$r_{1} 点乘 r_2 = 0， r_1 叉乘 r_2 = r_3 （）$

```cpp
Eigen::Matrix3f createRotationMatrix(float rx, float ry, float rz) {
    // 转换为弧度
    // rx = rx * M_PI / 180.0f; // Roll (绕X轴)
    // ry = ry * M_PI / 180.0f; // Pitch (绕Y轴)
    // rz = rz * M_PI / 180.0f; // Yaw (绕Z轴)
    // 创建绕各轴的旋转矩阵
    Eigen::Matrix3f R_x;
    R_x << 1, 0, 0,
           0, cos(rx), -sin(rx),
           0, sin(rx), cos(rx);
    Eigen::Matrix3f R_y;
    R_y << cos(ry), 0, sin(ry),
           0, 1, 0,
           -sin(ry), 0, cos(ry);
    Eigen::Matrix3f R_z;
    R_z << cos(rz), -sin(rz), 0,
           sin(rz), cos(rz), 0,
           0, 0, 1;
    // 组合旋转矩阵 (Z-Y-X顺序: R = R_z * R_y * R_x)
    return R_z * R_y * R_x;
}
```

要理解旋转矩阵行与行之间的关系，首先需要明确**旋转矩阵的核心数学身份**：它是一种特殊的**正交矩阵**（满足 ATA=I，其中 AT 是 A 的转置，I 是单位矩阵），且其**行列式为 1**（区别于行列式为 -1 的 “反射矩阵”，后者会改变图形朝向）。

基于正交矩阵的性质，旋转矩阵的行向量之间存在三个核心关系，结合具体维度的例子能更直观理解。

### 一、核心关系：行向量的 “单位性” 与 “正交性”

旋转矩阵的任意一行都是**单位向量**，且任意两行之间都是**正交关系**（点积为 0）。这是正交矩阵的本质属性，也是旋转矩阵行与行关系的基础。

#### 1. 单位性：每行自身的点积为 1

对于旋转矩阵 A 的第 i 行向量 ri​=[ai1​,ai2​,...,ain​]（n 为维度，如 2D、3D），其自身的点积满足：ri​⋅ri​=ai12​+ai22​+...+ain2​=1

这意味着每一行都是**长度为 1 的单位向量**。

#### 2. 正交性：不同行的点积为 0

对于旋转矩阵的第 i 行 ri​ 和第 j 行 rj​（i=j），其点积满足：ri​⋅rj​=ai1​aj1​+ai2​aj2​+...+ain​ajn​=0

这意味着任意两行之间是**垂直（正交）的向量**。

### 二、分维度举例：直观验证行关系

通过 2D 和 3D 旋转矩阵的具体形式，可以直接验证上述关系。

#### 1. 2D 旋转矩阵（绕原点旋转 θ 角）

2D 旋转矩阵的标准形式为：A=[cosθsinθ​−sinθcosθ​]

其两行向量分别为：

- 第 1 行：r1​=[cosθ,−sinθ]
- 第 2 行：r2​=[sinθ,cosθ]

**验证单位性**：

- r1​⋅r1​=cos2θ+(−sinθ)2=cos2θ+sin2θ=1
- r2​⋅r2​=sin2θ+cos2θ=1

**验证正交性**：r1​⋅r2​=cosθ⋅sinθ+(−sinθ)⋅cosθ=0

#### 2. 3D 旋转矩阵（以绕 z 轴旋转 θ 角为例）

3D 绕 z 轴旋转的标准形式为：A=

​cosθsinθ0​−sinθcosθ0​001​​

其三行向量分别为：

- 第 1 行：r1​=[cosθ,−sinθ,0]
- 第 2 行：r2​=[sinθ,cosθ,0]
- 第 3 行：r3​=[0,0,1]

**验证单位性**：

- r1​⋅r1​=cos2θ+sin2θ+0=1
- r2​⋅r2​=sin2θ+cos2θ+0=1
- r3​⋅r3​=0+0+1=1

**验证正交性**：

- r1​⋅r2​=cosθsinθ−sinθcosθ+0=0
- r1​⋅r3​=cosθ⋅0+(−sinθ)⋅0+0⋅1=0
- r2​⋅r3​=sinθ⋅0+cosθ⋅0+0⋅1=0

### 三、高维扩展：3D 旋转矩阵的 “叉积关系”

对于 3D 旋转矩阵（行列式为 1 的正交矩阵），除了单位性和正交性，还存在一个特殊关系：**第三行是前两行的叉积**（满足右手定则，体现 “旋转” 而非 “反射”）。

以绕 z 轴的 3D 旋转矩阵为例：r1​×r2​=

​icosθsinθ​j−sinθcosθ​k00​

​=k⋅(cos2θ+sin2θ)=[0,0,1]=r3​

这一关系是 3D 旋转 “右手定则” 的数学体现，也是行列式为 1 的直接推论（叉积的模长等于两向量构成平行四边形的面积，而单位正交向量的面积为 1，故叉积结果也是单位向量）。

### 四、关系的推论：行向量组是 “标准正交基”

结合上述关系，旋转矩阵的所有行向量构成了 Rn（n 维欧几里得空间）的**标准正交基**：

- “正交”：任意两行垂直（点积为 0）；
- “标准”：每行都是单位向量（长度为 1）。

标准正交基的重要性在于：旋转矩阵对向量的变换（如旋转）会**保持向量的长度和夹角不变**—— 这正是 “旋转” 的几何本质，而行向量的标准正交性是这一本质的数学保证。

### 总结：旋转矩阵行与行的核心关系

| 关系类型    | 数学表达（以第 i,j 行为例）   | 几何意义           |
| ------- | ------------------ | -------------- |
| 单位性     | 若 i=j，则 ri​⋅ri​=1  | 每行是长度为 1 的单位向量 |
| 正交性     | 若 i=j，则 ri​⋅rj​=0 | 任意两行是垂直（正交）的向量 |
| 3D 叉积关系 | r3​=r1​×r2​（绕 z 轴） | 体现右手旋转定则       |
| 整体属性    | 行向量组是 Rn 的标准正交基    | 保证旋转变换保长度、保夹角  |

![](/home/maple/笔记/images/2025-10-09-20-49-53-提取相机内参数u0和v0.png)

![](/home/maple/笔记/images/2025-10-09-20-57-06-提取摄像机内参uo和vo2.png)

![](/home/maple/笔记/images/2025-10-09-21-21-09-提取摄像机内参数theta.png)

![](/home/maple/笔记/images/2025-10-09-21-28-34-提取相机内参数theta2.png)

![](/home/maple/笔记/images/2025-10-09-21-32-44-提取相机内参数Alpha和Beta.png)

![](/home/maple/笔记/images/2025-10-09-21-37-15-提取摄像机外参数r1,r2,r3.png)

![](/home/maple/笔记/images/2025-10-09-21-40-50-提取摄像机外参数T.png)

![](/home/maple/笔记/images/2025-10-09-21-43-13-提取摄像机的参数.png)
